<template>
  <div>
    <my-header></my-header>
    <my-sidebar
      @onChangeTag="onChangeTag"
      @onTagsLoaded="onTagsInit"
    ></my-sidebar>

    <div class="content">
      <v-container>
        <v-row>
          <v-col cols="12">
            <!--这里显示管理员个人卡片-->
            <profile-card></profile-card>

            <!--这里显示管理员说明文档-->


            <div v-if="ifUsageShowed">
              <v-card style="margin-top: 10px">
                <v-card-title>
                  <div class="content-title">
                    说明
                  </div>
                </v-card-title>

                <v-card-text class="content-text">
                  <p>
                    本后台系统使用了bootstrap插件,所以强烈推荐使用
                    chrome,firefox,搜狗浏览器 等现代浏览器.请不要使用ie浏览器.
                    同时:希望老师能推荐学生使用以上三个浏览器进行党校系统的学习,这样浏览效果会更好!
                  </p>
                  <v-divider></v-divider>
                  <p>
                    后台共有15个部分模块组成,分别是 通知公告 栏目管理 党建专项
                    学习小组 党校培训 重要文件 理论学习 消息管理 申请人培训
                    院级积极分子培训 预备党员培训 支部管理 学生信息管理 管理员控制
                    系统功能锁这些部分组成.
                    其中前7个部分都是对前台页面新闻的管理和党校相关信息的发表.
                    后面的几个模块是对党校课程的控制盒学生状态的控制.
                  </p>
                  <v-divider></v-divider>
                  <p>
                    后台共分3种权限:超级管理员院级管理员栏目管理员.超级管理员可以管理所有后台的所有权限,包括超级管理员,院级管理员,栏目管理员的添加,删除等操作.但是不包括院级培训的添加和学生成绩的录入
                    院级管理员可以进行消息的处理操作以及院级积极分子培训的考试.学生信息管理的操作.但是请广大院级管理员注意:不得操作其他学院的相关数据,如果发现,将会封号处理.
                    栏目管理员是由超级管理员下放的权限:它以单个的模块为单位,只显示其拥有的权限.但是栏目管理员无法查看管理员控制盒系统锁模块.
                  </p>
                  <v-divider></v-divider>
                  <p>
                    请超级管理员注意:在给栏目管理员分配权限的时候,是不能分配管理员控制系统功能锁
                    这两个模块的. 以免栏目管理员对其权限进行修改.
                  </p>
                  <v-divider></v-divider>
                  <p>
                    栏目管理:主要管理的是前台党建专项的下拉菜单,在后台添加二级栏目,并且二级栏目未被删除,则在前台菜单栏内即可显示
                    同时请注意:栏目名称不可太长,否则影响前台效果的显示.
                  </p>
                </v-card-text>
              </v-card>
            </div>


            <!--这里显示问题-->
            <div v-else-if="permission==='false'" class="question-field">
              <!--扩展面板-->
              <v-expansion-panels>
                <v-expansion-panel
                  v-for="(item, i) in currentQuestions"
                  :key="i"
                  style="margin-top: 15px"
                >
                  <div>
                    <v-expansion-panel-header>
                      <p style="font-size: 26px; font-weight: 900; text-align: center">{{ item.name }}</p>
                    </v-expansion-panel-header>
                    <v-expansion-panel-content>
                      <v-textarea
                              auto-grow
                              solo
                              v-bind:value="item.description"
                              readonly
                      ></v-textarea>
                      <v-divider></v-divider>
                      <v-tabs center-active grow v-model="controlTab">
                        <v-tab
                          v-for="item in controlTabItems"
                          :key="item.tab"
                          >{{ item.title }}</v-tab>
                      </v-tabs>
                      <v-tabs-items v-model="controlTab">
                        <v-tab-item key="updateTag">
                          <v-card flat>
                            <v-chip style="margin-top: 15px">流转原因: {{ item.admin_commit }}</v-chip>

                            <v-divider style="margin-top: 15px"></v-divider>
                            <v-list two-line>
                              <v-list-item
                                v-for="tag in item.tags"
                                :key="tag.id"
                              >
                                <v-list-item-content>
                                  <v-list-item-title
                                    v-text="tag.name"
                                  ></v-list-item-title>

                                </v-list-item-content>
                              </v-list-item>
                            </v-list>
                            <v-divider></v-divider>


                          <div style="margin-top: 15px;height: auto; justify-content: center; text-align: center">
                            <v-btn width="300px" color="#E53935" >
                              <span style="color: #ffffff; font-weight: 700; font-size: 16px" @click="returnBack(item.id)">
                                退回
                              </span>
                            </v-btn>
                          </div>
                          </v-card>
                        </v-tab-item>


                        <!--这里要加上其他管理员的评论-->
                        <v-tab-item key="addComment">
                          <v-card flat >

                            <div v-if="!item.solved" class="status-answer-box">
                              <v-btn color="#E53935" width="300px">
                                <span class="btn-font-style">
                                  未解决
                                </span>
                              </v-btn>
                            </div>

                            <div v-else class="status-answer-box" >
                              <v-btn color="#66BB6A" width="300px" >
                                <span class="btn-font-style">
                                  已解决
                                </span>
                              </v-btn>

                              <!--管理员回复图标-->
                              <div style="position: relative;left: 55%">
                                <svg @click="openAnswer(item.id)" t="1600439847025" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4864" width="32" height="32"><path d="M927.5 928.4H98c-16.6 0-30-13.4-30-30s13.4-30 30-30h829.5c16.6 0 30 13.4 30 30s-13.4 30-30 30zM723.9 401.4c-14.3 0-26.9-10.2-29.5-24.7-6.6-37.2-38.8-64.3-76.6-64.6l-43.6-0.3c-16.6-0.1-29.9-13.6-29.8-30.2 0.1-16.5 13.5-29.8 30-29.8h0.2l43.6 0.3c66.7 0.4 123.6 48.3 135.3 114 2.9 16.3-8 31.9-24.3 34.8-1.8 0.4-3.5 0.5-5.3 0.5z" fill="#F0C900" p-id="4865"></path><path d="M203 918.8h-4.3l-22.5-0.3-6-21.7c-23.9-87.1-4.3-181.1 52.6-251.3l412.1-509.3c22.7-28 54.9-45.9 90.7-50.3 35.8-4.4 71.4 5.2 100.2 26.9 57.8 43.6 69.3 126.1 25.7 183.9-0.9 1.2-1.8 2.4-2.7 3.5l-409.4 506c-28.8 35.6-65.9 64.6-107.3 84-40.3 18.7-84.8 28.6-129.1 28.6z m539.5-774.1c-3.2 0-6.4 0.2-9.6 0.6-20.3 2.5-38.5 12.6-51.4 28.5L269.4 683.1c-39.8 49.1-56.4 113.1-46.3 174.8 28.8-2.4 57.3-9.9 83.4-22.2 33.3-15.6 63-38.9 86.1-67.4l409.4-506c0.5-0.6 1-1.3 1.5-1.9 23.7-31.4 17.4-76.1-14-99.8-13.6-10.4-30-15.9-47-15.9z" fill="#3A3933" p-id="4866"></path></svg>
                                <div>
                                  <v-overlay :value="isAnswerOverlay">
                                    <v-btn
                                            icon
                                            @click="isAnswerOverlay=false"
                                    >
                                      <v-icon>mdi-close</v-icon>
                                    </v-btn>
                                    <v-card width="600px" height="600px" style="overflow-y: scroll;overflow-x: hidden" color="#42A5F5">
                                      <v-card-title>
                                        <div class="comment-card-title">
                                          评论
                                        </div>
                                      </v-card-title>
                                      <v-card-text v-for="(answer,answerIndex) in currentAnswer" :key="answerIndex">
                                        <div>
                                          <v-textarea
                                                  filled
                                                  v-bind:label="answer.admin_id+':'"
                                                  auto-grow
                                                  v-bind:value="answer.contain"
                                                  readonly
                                          ></v-textarea>
                                          <div style="position: relative;left: 90%">
                                            <span style="display: inline-flex;align-items: center">
                                              <svg t="1600395014225" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4102" width="32" height="32"><path d="M180.2 363.5h133.1c15.6 0 30.8-4.9 43.5-14l29.1-20.9c66.1-47.5 106.9-122.5 110.9-203.8C497.9 102 516.7 84 539.6 84h4.8c20.7 0 35.2 7 51 28.1 48.4 60.4 50.3 140.4 35.9 214.4l-2.3 12c-4.9 11.9 3.9 24.9 16.7 24.9H828c45.1 0 78.4 8.1 67.2 86.2C873.5 639 818.3 815.7 797 857.4c-12.8 23.7-31.6 39.3-56.6 39.3H209.7c-28.1 0-51.3-21.7-53.3-49.7L127 420.4c-2.2-30.7 22.2-56.9 53.2-56.9z" fill="#707070" p-id="4103"></path><path d="M630.8 896.9h109.5c25 0 43.8-15.7 56.6-39.3 21.2-41.8 76.5-218.5 98.2-407.8 10.3-71.3-16.6-84.2-55.7-85.9 21.5 49.5 33.4 104.1 33.4 161.6-0.1 165.7-99.5 308.3-242 371.4zM151.8 781.8l4.5 65.4c1.9 28 25.2 49.7 53.3 49.7h93c-59-26.1-110.6-65.8-150.8-115.1zM497.2 120.4c42.4 3.2 83 12.8 120.7 28-6-12.6-13.5-24.8-22.7-36.2-7.8-10.4-15.3-17.4-23.4-21.8-12.8-2.5-25.9-4.4-39-5.8-18.2 2.9-32.8 17.3-35.6 35.8z" fill="#707070" p-id="4104"></path><path d="M449.1 856.1c-130.5 0-244.2-71.4-304.4-177.3l7.1 103c40.2 49.3 91.8 89 150.7 115.1h328.3c142.5-63 242-205.7 242-371.5 0-57.4-11.9-112-33.4-161.6-3.7-0.2-7.6-0.2-11.5-0.2h-59.2c19.5 43.6 30.3 91.9 30.3 142.7-0.1 193.1-156.7 349.8-349.9 349.8zM496.7 124.8c-0.6 11.6-1.9 23-3.9 34.2 52.3 6.5 101 24.6 143.4 51.5-3.1-21.6-8.9-42.6-18.3-62.3-37.8-15.2-78.3-24.8-120.7-28-0.2 1.6-0.4 3.1-0.5 4.6z" fill="#707070" p-id="4105"></path><path d="M482.8 198.1c60 10.6 113.6 39.4 155.1 80.4 1.8-22.8 1.6-45.7-1.6-67.9-42.5-27-91.2-45-143.4-51.5-2.5 13.3-5.8 26.3-10.1 39zM431.4 780.6c-162.1 0-293.5-131.4-293.5-293.5 0-43.2 9.3-84.2 26.1-121.1-22.8 7.2-38.8 29.3-37.1 54.5l17.8 258.2C204.8 784.6 318.6 856 449.1 856c193.2 0 349.8-156.6 349.8-349.8 0-50.8-10.8-99.1-30.3-142.7h-70.9c17.5 37.6 27.2 79.4 27.2 123.6 0 162.1-131.4 293.5-293.5 293.5z" fill="#707070" p-id="4106"></path><path d="M466.1 236.6C572 260.5 651 355 651 468.1c0 131-106.2 237.3-237.3 237.3S176.5 599.1 176.5 468.1c0-37.5 8.7-73 24.2-104.5h-20.6c-5.6 0-11.1 0.9-16.2 2.5-16.8 36.9-26.1 77.9-26.1 121.1 0 162.1 131.4 293.5 293.5 293.5s293.5-131.4 293.5-293.5c0-44.2-9.8-86-27.2-123.6h-52.1c-12.9 0-21.6-13-16.7-24.9l2.3-12c3.1-15.8 5.4-31.9 6.7-48.1-41.5-41.1-95.2-69.8-155.1-80.4-4.5 13.2-10 26-16.6 38.4z" fill="#707070" p-id="4107"></path><path d="M413.7 705.3c131 0 237.3-106.2 237.3-237.3 0-113-79.1-207.6-184.9-231.4-6.9 13.1-14.9 25.6-23.9 37.4 77.6 20.4 134.9 91 134.9 175 0 99.9-81 180.9-180.9 180.9s-180.9-81-180.9-180.9c0-30.9 7.8-60 21.4-85.4h-36c-15.5 31.5-24.2 67-24.2 104.5 0 131 106.2 237.2 237.2 237.2z" fill="#707070" p-id="4108"></path><path d="M396.2 629.9c99.9 0 180.9-81 180.9-180.9 0-84-57.3-154.6-134.9-175-9.6 12.6-20.4 24.4-32.3 35.2 53.7 13.9 93.3 62.7 93.3 120.7 0 68.9-55.8 124.7-124.7 124.7s-124.7-55.8-124.7-124.7c0-24.4 7-47.1 19.1-66.4h-36.3C223 389 215.3 418.1 215.3 449c0 99.9 81 180.9 180.9 180.9z" fill="#707070" p-id="4109"></path><path d="M378.5 554.5c68.9 0 124.7-55.8 124.7-124.7 0-58-39.6-106.8-93.3-120.7-7.6 6.9-15.6 13.4-24 19.5l-29.1 20.9c-12.7 9.1-27.9 14-43.5 14H273c-12.1 19.2-19.1 42-19.1 66.4-0.1 68.8 55.8 124.6 124.6 124.6z" fill="#707070" p-id="4110"></path><path d="M740.3 905.9H209.6c-32.7 0-60-25.5-62.2-58.1L118 421.2c-1.2-17.2 4.9-34.3 16.6-46.8 11.8-12.6 28.4-19.8 45.6-19.8h133.1c13.8 0 27.1-4.3 38.3-12.3l29.1-20.9c31.3-22.5 57.7-52.3 76.1-86.2 18.4-33.9 29.2-72.2 31-110.7 1.3-27.7 24.1-49.4 51.8-49.4h4.8c24.4 0 41.3 9.2 58.1 31.6 43.1 53.9 55.8 128.5 37.6 221.7l-2.5 12.8-0.3 0.8c-1.2 2.8-0.9 5.9 0.9 8.5 1.7 2.6 4.5 4 7.5 4H828c22.8 0 48.5 1.5 64.2 19.7 13.4 15.5 17.2 39.8 11.9 76.6-12.1 105.5-33.6 199.8-49.5 260.4-19.8 75.4-39.2 129.9-49.6 150.4l-0.1 0.2c-15.7 28.8-38 44.1-64.6 44.1zM180.2 372.5c-12.4 0-24 5-32.4 14.1s-12.7 20.9-11.8 33.3l29.4 426.6c1.6 23.2 21 41.3 44.3 41.3h530.7c19.9 0 36.2-11.6 48.6-34.5 10-19.7 28.8-72.7 48.2-146.7 15.8-60 37.1-153.5 49-258v-0.3c4.5-30.9 1.9-51.3-7.7-62.4-9.7-11.2-27.2-13.5-50.6-13.5H645.5c-9 0-17.4-4.5-22.5-12-4.9-7.2-5.9-16.3-2.9-24.4l2.2-11.2c17.1-87.9 5.6-157.5-34.1-207.1l-0.2-0.2C574.5 99.4 563 93 544.2 93h-4.8c-18.1 0-32.9 14.2-33.8 32.2-2 41.2-13.5 82.2-33.2 118.5-19.7 36.3-47.9 68.2-81.4 92.2l-29 20.9c-14.3 10.3-31.2 15.7-48.8 15.7h-133z" fill="#707070" p-id="4111"></path><path d="M536.9 198.5c-9.7-2.4-19.4 3.5-21.8 13.2-15.5 63-62.2 107.6-62.8 108.1-7.2 6.8-7.6 18.2-0.8 25.4 3.5 3.8 8.3 5.7 13.1 5.7 4.4 0 8.8-1.6 12.3-4.9 2.2-2.1 55-52.1 73.1-125.8 2.5-9.6-3.4-19.3-13.1-21.7zM411.9 354.5l-9.5 6.8c-8.1 5.8-9.9 17.1-4.1 25.1 3.2 4.5 8.1 7 13.2 7.4 4.1 0.3 8.3-0.8 11.9-3.4l9.5-6.8c8.1-5.8 9.9-17.1 4.1-25.1-5.8-8-17-9.8-25.1-4z" fill="#707070" p-id="4112"></path><path d="M222 426.3h78.3c13.4 0 24.3 10.9 24.3 24.3v359.6c0 13.4-10.9 24.3-24.3 24.3h-54.5c-12.8 0-23.4-9.9-24.2-22.7l-23.8-359.6c-0.9-14 10.2-25.9 24.2-25.9z" fill="#707070" p-id="4113"></path></svg>
                                              <div class="css-ydodb">{{answer.likes}}</div>
                                            </span>
                                          </div>
                                        </div>
                                        <v-divider></v-divider>
                                      </v-card-text>
                                    </v-card>
                                  </v-overlay>
                                </div>
                              </div>


                              <!--学生评论图标-->

                              <div style="position: relative; left: 58%">
                                <svg @click="openComment(item.id)" t="1600439943734" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5798" width="32" height="32"><path d="M193 317h-29a6 6 0 0 0-6 6v408a6 6 0 0 0 6 6h83.806v121.532a6 6 0 0 0 10.195 4.29L386.698 737h200.66l60.159 58.815A66.346 66.346 0 0 1 635 797H411.154L299.945 905.725c-26.064 25.482-67.85 25.01-93.332-1.054a66 66 0 0 1-18.807-46.14V797H164c-36.45 0-66-29.55-66-66V323c0-36.45 29.55-66 66-66h29v60z m642.194 449.532a66 66 0 0 1-18.807 46.139c-25.482 26.064-67.268 26.536-93.332 1.054L582.183 676H299c-36.45 0-66-29.55-66-66V164c0-36.45 29.55-66 66-66h560c36.45 0 66 29.55 66 66v446c0 36.45-29.55 66-66 66h-23.806v90.532z m-60-150.532H859a6 6 0 0 0 6-6V164a6 6 0 0 0-6-6H299a6 6 0 0 0-6 6v446a6 6 0 0 0 6 6h307.64L765 770.822a6 6 0 0 0 10.194-4.29V616z" fill="#2F54EB" p-id="5799"></path><path d="M757.5 384.5m0-49.5a49.5 49.5 0 1 0 0 99 49.5 49.5 0 1 0 0-99Z" fill="#85A5FF" p-id="5800"></path><path d="M575.5 384.5m0-49.5a49.5 49.5 0 1 0 0 99 49.5 49.5 0 1 0 0-99Z" fill="#85A5FF" p-id="5801"></path><path d="M392.5 384.5m0-49.5a49.5 49.5 0 1 0 0 99 49.5 49.5 0 1 0 0-99Z" fill="#85A5FF" p-id="5802"></path></svg>
                                <div style="margin-top: 15px">
                                  <v-overlay :value="isCommentOverlay">
                                    <v-btn
                                            icon
                                            @click="isCommentOverlay=false"
                                    >
                                      <v-icon>mdi-close</v-icon>
                                    </v-btn>
                                    <v-card width="600px" height="600px" style="overflow-y: scroll;overflow-x: hidden" color="#42A5F5">
                                      <v-card-title>
                                        <div class="comment-card-title">
                                          评论
                                        </div>
                                      </v-card-title>
                                      <v-card-text v-for="(comment,commentIndex) in currentStudentComment" :key="commentIndex">
                                        <div>
                                          <v-textarea
                                                  filled
                                                  v-bind:label="comment.username+':'"
                                                  auto-grow
                                                  v-bind:value="comment.contain"
                                                  readonly
                                          ></v-textarea>
                                          <div style="position: relative;left: 90%">
                                            <span style="display: inline-flex;align-items: center">
                                              <svg t="1600395014225" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4102" width="32" height="32"><path d="M180.2 363.5h133.1c15.6 0 30.8-4.9 43.5-14l29.1-20.9c66.1-47.5 106.9-122.5 110.9-203.8C497.9 102 516.7 84 539.6 84h4.8c20.7 0 35.2 7 51 28.1 48.4 60.4 50.3 140.4 35.9 214.4l-2.3 12c-4.9 11.9 3.9 24.9 16.7 24.9H828c45.1 0 78.4 8.1 67.2 86.2C873.5 639 818.3 815.7 797 857.4c-12.8 23.7-31.6 39.3-56.6 39.3H209.7c-28.1 0-51.3-21.7-53.3-49.7L127 420.4c-2.2-30.7 22.2-56.9 53.2-56.9z" fill="#707070" p-id="4103"></path><path d="M630.8 896.9h109.5c25 0 43.8-15.7 56.6-39.3 21.2-41.8 76.5-218.5 98.2-407.8 10.3-71.3-16.6-84.2-55.7-85.9 21.5 49.5 33.4 104.1 33.4 161.6-0.1 165.7-99.5 308.3-242 371.4zM151.8 781.8l4.5 65.4c1.9 28 25.2 49.7 53.3 49.7h93c-59-26.1-110.6-65.8-150.8-115.1zM497.2 120.4c42.4 3.2 83 12.8 120.7 28-6-12.6-13.5-24.8-22.7-36.2-7.8-10.4-15.3-17.4-23.4-21.8-12.8-2.5-25.9-4.4-39-5.8-18.2 2.9-32.8 17.3-35.6 35.8z" fill="#707070" p-id="4104"></path><path d="M449.1 856.1c-130.5 0-244.2-71.4-304.4-177.3l7.1 103c40.2 49.3 91.8 89 150.7 115.1h328.3c142.5-63 242-205.7 242-371.5 0-57.4-11.9-112-33.4-161.6-3.7-0.2-7.6-0.2-11.5-0.2h-59.2c19.5 43.6 30.3 91.9 30.3 142.7-0.1 193.1-156.7 349.8-349.9 349.8zM496.7 124.8c-0.6 11.6-1.9 23-3.9 34.2 52.3 6.5 101 24.6 143.4 51.5-3.1-21.6-8.9-42.6-18.3-62.3-37.8-15.2-78.3-24.8-120.7-28-0.2 1.6-0.4 3.1-0.5 4.6z" fill="#707070" p-id="4105"></path><path d="M482.8 198.1c60 10.6 113.6 39.4 155.1 80.4 1.8-22.8 1.6-45.7-1.6-67.9-42.5-27-91.2-45-143.4-51.5-2.5 13.3-5.8 26.3-10.1 39zM431.4 780.6c-162.1 0-293.5-131.4-293.5-293.5 0-43.2 9.3-84.2 26.1-121.1-22.8 7.2-38.8 29.3-37.1 54.5l17.8 258.2C204.8 784.6 318.6 856 449.1 856c193.2 0 349.8-156.6 349.8-349.8 0-50.8-10.8-99.1-30.3-142.7h-70.9c17.5 37.6 27.2 79.4 27.2 123.6 0 162.1-131.4 293.5-293.5 293.5z" fill="#707070" p-id="4106"></path><path d="M466.1 236.6C572 260.5 651 355 651 468.1c0 131-106.2 237.3-237.3 237.3S176.5 599.1 176.5 468.1c0-37.5 8.7-73 24.2-104.5h-20.6c-5.6 0-11.1 0.9-16.2 2.5-16.8 36.9-26.1 77.9-26.1 121.1 0 162.1 131.4 293.5 293.5 293.5s293.5-131.4 293.5-293.5c0-44.2-9.8-86-27.2-123.6h-52.1c-12.9 0-21.6-13-16.7-24.9l2.3-12c3.1-15.8 5.4-31.9 6.7-48.1-41.5-41.1-95.2-69.8-155.1-80.4-4.5 13.2-10 26-16.6 38.4z" fill="#707070" p-id="4107"></path><path d="M413.7 705.3c131 0 237.3-106.2 237.3-237.3 0-113-79.1-207.6-184.9-231.4-6.9 13.1-14.9 25.6-23.9 37.4 77.6 20.4 134.9 91 134.9 175 0 99.9-81 180.9-180.9 180.9s-180.9-81-180.9-180.9c0-30.9 7.8-60 21.4-85.4h-36c-15.5 31.5-24.2 67-24.2 104.5 0 131 106.2 237.2 237.2 237.2z" fill="#707070" p-id="4108"></path><path d="M396.2 629.9c99.9 0 180.9-81 180.9-180.9 0-84-57.3-154.6-134.9-175-9.6 12.6-20.4 24.4-32.3 35.2 53.7 13.9 93.3 62.7 93.3 120.7 0 68.9-55.8 124.7-124.7 124.7s-124.7-55.8-124.7-124.7c0-24.4 7-47.1 19.1-66.4h-36.3C223 389 215.3 418.1 215.3 449c0 99.9 81 180.9 180.9 180.9z" fill="#707070" p-id="4109"></path><path d="M378.5 554.5c68.9 0 124.7-55.8 124.7-124.7 0-58-39.6-106.8-93.3-120.7-7.6 6.9-15.6 13.4-24 19.5l-29.1 20.9c-12.7 9.1-27.9 14-43.5 14H273c-12.1 19.2-19.1 42-19.1 66.4-0.1 68.8 55.8 124.6 124.6 124.6z" fill="#707070" p-id="4110"></path><path d="M740.3 905.9H209.6c-32.7 0-60-25.5-62.2-58.1L118 421.2c-1.2-17.2 4.9-34.3 16.6-46.8 11.8-12.6 28.4-19.8 45.6-19.8h133.1c13.8 0 27.1-4.3 38.3-12.3l29.1-20.9c31.3-22.5 57.7-52.3 76.1-86.2 18.4-33.9 29.2-72.2 31-110.7 1.3-27.7 24.1-49.4 51.8-49.4h4.8c24.4 0 41.3 9.2 58.1 31.6 43.1 53.9 55.8 128.5 37.6 221.7l-2.5 12.8-0.3 0.8c-1.2 2.8-0.9 5.9 0.9 8.5 1.7 2.6 4.5 4 7.5 4H828c22.8 0 48.5 1.5 64.2 19.7 13.4 15.5 17.2 39.8 11.9 76.6-12.1 105.5-33.6 199.8-49.5 260.4-19.8 75.4-39.2 129.9-49.6 150.4l-0.1 0.2c-15.7 28.8-38 44.1-64.6 44.1zM180.2 372.5c-12.4 0-24 5-32.4 14.1s-12.7 20.9-11.8 33.3l29.4 426.6c1.6 23.2 21 41.3 44.3 41.3h530.7c19.9 0 36.2-11.6 48.6-34.5 10-19.7 28.8-72.7 48.2-146.7 15.8-60 37.1-153.5 49-258v-0.3c4.5-30.9 1.9-51.3-7.7-62.4-9.7-11.2-27.2-13.5-50.6-13.5H645.5c-9 0-17.4-4.5-22.5-12-4.9-7.2-5.9-16.3-2.9-24.4l2.2-11.2c17.1-87.9 5.6-157.5-34.1-207.1l-0.2-0.2C574.5 99.4 563 93 544.2 93h-4.8c-18.1 0-32.9 14.2-33.8 32.2-2 41.2-13.5 82.2-33.2 118.5-19.7 36.3-47.9 68.2-81.4 92.2l-29 20.9c-14.3 10.3-31.2 15.7-48.8 15.7h-133z" fill="#707070" p-id="4111"></path><path d="M536.9 198.5c-9.7-2.4-19.4 3.5-21.8 13.2-15.5 63-62.2 107.6-62.8 108.1-7.2 6.8-7.6 18.2-0.8 25.4 3.5 3.8 8.3 5.7 13.1 5.7 4.4 0 8.8-1.6 12.3-4.9 2.2-2.1 55-52.1 73.1-125.8 2.5-9.6-3.4-19.3-13.1-21.7zM411.9 354.5l-9.5 6.8c-8.1 5.8-9.9 17.1-4.1 25.1 3.2 4.5 8.1 7 13.2 7.4 4.1 0.3 8.3-0.8 11.9-3.4l9.5-6.8c8.1-5.8 9.9-17.1 4.1-25.1-5.8-8-17-9.8-25.1-4z" fill="#707070" p-id="4112"></path><path d="M222 426.3h78.3c13.4 0 24.3 10.9 24.3 24.3v359.6c0 13.4-10.9 24.3-24.3 24.3h-54.5c-12.8 0-23.4-9.9-24.2-22.7l-23.8-359.6c-0.9-14 10.2-25.9 24.2-25.9z" fill="#707070" p-id="4113"></path></svg>
                                              <div class="css-ydodb">{{comment.likes}}</div>
                                            </span>
                                          </div>
                                        </div>
                                        <v-divider></v-divider>
                                      </v-card-text>
                                    </v-card>
                                  </v-overlay>
                                </div>
                              </div>

                            </div>



                            <!--富文本编辑器-->
                            <quill-editor
                                    v-model="item.comment"
                                    ref="myQuillEditor"
                                    :options="editorOption"
                            >
                            </quill-editor>

                            <div
                                    style="width: 100%; top: 0px; height: auto; justify-content: center;text-align: center;"
                                    class="btn-box-style"
                            >
                              <v-btn
                                      center-active
                                      large
                                      @click="postCommit(item.id, item.comment)"
                                      width="300px"
                                      color="#66BB6A"
                              >
                                <span class="btn-font-style">
                                  提交
                                </span>
                              </v-btn
                              >
                            </div>



                          </v-card>
                        </v-tab-item>
                      </v-tabs-items>
                    </v-expansion-panel-content>
                  </div>
                </v-expansion-panel>
              </v-expansion-panels>
            </div>








            <!--这里是两办管理员-->
            <div v-else-if="permission==='true'" style="margin-top: 15px">
              <v-expansion-panels>
                <v-expansion-panel
                        v-for="(item, i) in currentQuestions"
                        :key="i"
                        style="margin-top: 15px"
                >
                  <div>
                    <v-expansion-panel-header>
                      <p style="font-size: 26px; font-weight: 900; text-align: center">{{ item.name }}</p>
                    </v-expansion-panel-header>
                    <v-expansion-panel-content>
                      <v-textarea
                              auto-grow
                              solo
                              v-bind:value="item.description"
                              readonly
                      ></v-textarea>
                      <v-divider></v-divider>
                      <v-tabs center-active grow v-model="controlTab">
                        <v-tab
                                v-for="item in controlTabItems"
                                :key="item.tab"
                        >{{ item.title }}</v-tab
                        >
                      </v-tabs>
                      <v-tabs-items v-model="controlTab">
                        <v-tab-item key="updateTag">
                          <v-card flat>
                            <v-chip style="margin-top: 15px">流转原因: {{ item.admin_commit }}</v-chip>

                            <v-divider style="margin-top: 15px"></v-divider>
                            <v-list two-line>
                              <v-list-item
                                      v-for="tag in item.tags"
                                      :key="tag.id"
                              >
                                <v-list-item-content>
                                  <v-list-item-title
                                          v-text="tag.name"
                                  ></v-list-item-title>
                                </v-list-item-content>

                                <v-list-item-action>
                                  <v-btn
                                          icon
                                          @click="deleteTag(item.id, tag.id)"
                                  >
                                    <v-icon color="grey lighten-1"
                                    >mdi-delete</v-icon
                                    >
                                  </v-btn>
                                </v-list-item-action>
                              </v-list-item>
                            </v-list>
                            <v-divider></v-divider>

                            <!--流转原因封装成组件-->
                            <div>
                              <tag-search-column :current-question="item"></tag-search-column>
                            </div>

                          </v-card>
                        </v-tab-item>


                        <v-tab-item key="addComment">
                          <v-card flat>
                            <div v-if="!item.solved" class="status-answer-box">
                              <v-btn color="#E53935" width="300px">
                                <span class="btn-font-style">
                                  未解决
                                </span>
                              </v-btn>

                              <!--管理员回复图标-->
                              <div style="position: relative;left: 55%">
                                <svg @click="openAnswer(item.id)" t="1600439847025" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4864" width="32" height="32"><path d="M927.5 928.4H98c-16.6 0-30-13.4-30-30s13.4-30 30-30h829.5c16.6 0 30 13.4 30 30s-13.4 30-30 30zM723.9 401.4c-14.3 0-26.9-10.2-29.5-24.7-6.6-37.2-38.8-64.3-76.6-64.6l-43.6-0.3c-16.6-0.1-29.9-13.6-29.8-30.2 0.1-16.5 13.5-29.8 30-29.8h0.2l43.6 0.3c66.7 0.4 123.6 48.3 135.3 114 2.9 16.3-8 31.9-24.3 34.8-1.8 0.4-3.5 0.5-5.3 0.5z" fill="#F0C900" p-id="4865"></path><path d="M203 918.8h-4.3l-22.5-0.3-6-21.7c-23.9-87.1-4.3-181.1 52.6-251.3l412.1-509.3c22.7-28 54.9-45.9 90.7-50.3 35.8-4.4 71.4 5.2 100.2 26.9 57.8 43.6 69.3 126.1 25.7 183.9-0.9 1.2-1.8 2.4-2.7 3.5l-409.4 506c-28.8 35.6-65.9 64.6-107.3 84-40.3 18.7-84.8 28.6-129.1 28.6z m539.5-774.1c-3.2 0-6.4 0.2-9.6 0.6-20.3 2.5-38.5 12.6-51.4 28.5L269.4 683.1c-39.8 49.1-56.4 113.1-46.3 174.8 28.8-2.4 57.3-9.9 83.4-22.2 33.3-15.6 63-38.9 86.1-67.4l409.4-506c0.5-0.6 1-1.3 1.5-1.9 23.7-31.4 17.4-76.1-14-99.8-13.6-10.4-30-15.9-47-15.9z" fill="#3A3933" p-id="4866"></path></svg>
                                <div>
                                  <v-overlay :value="isAnswerOverlay">
                                    <v-btn
                                            icon
                                            @click="isAnswerOverlay=false"
                                    >
                                      <v-icon>mdi-close</v-icon>
                                    </v-btn>
                                    <v-card width="600px" height="600px" style="overflow-y: scroll;overflow-x: hidden" color="#42A5F5">
                                      <v-card-title>
                                        <div class="comment-card-title">
                                          评论
                                        </div>
                                      </v-card-title>
                                      <v-card-text v-for="(answer,answerIndex) in currentAnswer" :key="answerIndex">
                                        <div>
                                          <v-textarea
                                                  filled
                                                  v-bind:label="answer.admin_id+':'"
                                                  auto-grow
                                                  v-bind:value="answer.contain"
                                                  readonly
                                          ></v-textarea>
                                          <div style="position: relative;left: 90%">
                                            <span style="display: inline-flex;align-items: center">
                                              <svg t="1600395014225" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4102" width="32" height="32"><path d="M180.2 363.5h133.1c15.6 0 30.8-4.9 43.5-14l29.1-20.9c66.1-47.5 106.9-122.5 110.9-203.8C497.9 102 516.7 84 539.6 84h4.8c20.7 0 35.2 7 51 28.1 48.4 60.4 50.3 140.4 35.9 214.4l-2.3 12c-4.9 11.9 3.9 24.9 16.7 24.9H828c45.1 0 78.4 8.1 67.2 86.2C873.5 639 818.3 815.7 797 857.4c-12.8 23.7-31.6 39.3-56.6 39.3H209.7c-28.1 0-51.3-21.7-53.3-49.7L127 420.4c-2.2-30.7 22.2-56.9 53.2-56.9z" fill="#707070" p-id="4103"></path><path d="M630.8 896.9h109.5c25 0 43.8-15.7 56.6-39.3 21.2-41.8 76.5-218.5 98.2-407.8 10.3-71.3-16.6-84.2-55.7-85.9 21.5 49.5 33.4 104.1 33.4 161.6-0.1 165.7-99.5 308.3-242 371.4zM151.8 781.8l4.5 65.4c1.9 28 25.2 49.7 53.3 49.7h93c-59-26.1-110.6-65.8-150.8-115.1zM497.2 120.4c42.4 3.2 83 12.8 120.7 28-6-12.6-13.5-24.8-22.7-36.2-7.8-10.4-15.3-17.4-23.4-21.8-12.8-2.5-25.9-4.4-39-5.8-18.2 2.9-32.8 17.3-35.6 35.8z" fill="#707070" p-id="4104"></path><path d="M449.1 856.1c-130.5 0-244.2-71.4-304.4-177.3l7.1 103c40.2 49.3 91.8 89 150.7 115.1h328.3c142.5-63 242-205.7 242-371.5 0-57.4-11.9-112-33.4-161.6-3.7-0.2-7.6-0.2-11.5-0.2h-59.2c19.5 43.6 30.3 91.9 30.3 142.7-0.1 193.1-156.7 349.8-349.9 349.8zM496.7 124.8c-0.6 11.6-1.9 23-3.9 34.2 52.3 6.5 101 24.6 143.4 51.5-3.1-21.6-8.9-42.6-18.3-62.3-37.8-15.2-78.3-24.8-120.7-28-0.2 1.6-0.4 3.1-0.5 4.6z" fill="#707070" p-id="4105"></path><path d="M482.8 198.1c60 10.6 113.6 39.4 155.1 80.4 1.8-22.8 1.6-45.7-1.6-67.9-42.5-27-91.2-45-143.4-51.5-2.5 13.3-5.8 26.3-10.1 39zM431.4 780.6c-162.1 0-293.5-131.4-293.5-293.5 0-43.2 9.3-84.2 26.1-121.1-22.8 7.2-38.8 29.3-37.1 54.5l17.8 258.2C204.8 784.6 318.6 856 449.1 856c193.2 0 349.8-156.6 349.8-349.8 0-50.8-10.8-99.1-30.3-142.7h-70.9c17.5 37.6 27.2 79.4 27.2 123.6 0 162.1-131.4 293.5-293.5 293.5z" fill="#707070" p-id="4106"></path><path d="M466.1 236.6C572 260.5 651 355 651 468.1c0 131-106.2 237.3-237.3 237.3S176.5 599.1 176.5 468.1c0-37.5 8.7-73 24.2-104.5h-20.6c-5.6 0-11.1 0.9-16.2 2.5-16.8 36.9-26.1 77.9-26.1 121.1 0 162.1 131.4 293.5 293.5 293.5s293.5-131.4 293.5-293.5c0-44.2-9.8-86-27.2-123.6h-52.1c-12.9 0-21.6-13-16.7-24.9l2.3-12c3.1-15.8 5.4-31.9 6.7-48.1-41.5-41.1-95.2-69.8-155.1-80.4-4.5 13.2-10 26-16.6 38.4z" fill="#707070" p-id="4107"></path><path d="M413.7 705.3c131 0 237.3-106.2 237.3-237.3 0-113-79.1-207.6-184.9-231.4-6.9 13.1-14.9 25.6-23.9 37.4 77.6 20.4 134.9 91 134.9 175 0 99.9-81 180.9-180.9 180.9s-180.9-81-180.9-180.9c0-30.9 7.8-60 21.4-85.4h-36c-15.5 31.5-24.2 67-24.2 104.5 0 131 106.2 237.2 237.2 237.2z" fill="#707070" p-id="4108"></path><path d="M396.2 629.9c99.9 0 180.9-81 180.9-180.9 0-84-57.3-154.6-134.9-175-9.6 12.6-20.4 24.4-32.3 35.2 53.7 13.9 93.3 62.7 93.3 120.7 0 68.9-55.8 124.7-124.7 124.7s-124.7-55.8-124.7-124.7c0-24.4 7-47.1 19.1-66.4h-36.3C223 389 215.3 418.1 215.3 449c0 99.9 81 180.9 180.9 180.9z" fill="#707070" p-id="4109"></path><path d="M378.5 554.5c68.9 0 124.7-55.8 124.7-124.7 0-58-39.6-106.8-93.3-120.7-7.6 6.9-15.6 13.4-24 19.5l-29.1 20.9c-12.7 9.1-27.9 14-43.5 14H273c-12.1 19.2-19.1 42-19.1 66.4-0.1 68.8 55.8 124.6 124.6 124.6z" fill="#707070" p-id="4110"></path><path d="M740.3 905.9H209.6c-32.7 0-60-25.5-62.2-58.1L118 421.2c-1.2-17.2 4.9-34.3 16.6-46.8 11.8-12.6 28.4-19.8 45.6-19.8h133.1c13.8 0 27.1-4.3 38.3-12.3l29.1-20.9c31.3-22.5 57.7-52.3 76.1-86.2 18.4-33.9 29.2-72.2 31-110.7 1.3-27.7 24.1-49.4 51.8-49.4h4.8c24.4 0 41.3 9.2 58.1 31.6 43.1 53.9 55.8 128.5 37.6 221.7l-2.5 12.8-0.3 0.8c-1.2 2.8-0.9 5.9 0.9 8.5 1.7 2.6 4.5 4 7.5 4H828c22.8 0 48.5 1.5 64.2 19.7 13.4 15.5 17.2 39.8 11.9 76.6-12.1 105.5-33.6 199.8-49.5 260.4-19.8 75.4-39.2 129.9-49.6 150.4l-0.1 0.2c-15.7 28.8-38 44.1-64.6 44.1zM180.2 372.5c-12.4 0-24 5-32.4 14.1s-12.7 20.9-11.8 33.3l29.4 426.6c1.6 23.2 21 41.3 44.3 41.3h530.7c19.9 0 36.2-11.6 48.6-34.5 10-19.7 28.8-72.7 48.2-146.7 15.8-60 37.1-153.5 49-258v-0.3c4.5-30.9 1.9-51.3-7.7-62.4-9.7-11.2-27.2-13.5-50.6-13.5H645.5c-9 0-17.4-4.5-22.5-12-4.9-7.2-5.9-16.3-2.9-24.4l2.2-11.2c17.1-87.9 5.6-157.5-34.1-207.1l-0.2-0.2C574.5 99.4 563 93 544.2 93h-4.8c-18.1 0-32.9 14.2-33.8 32.2-2 41.2-13.5 82.2-33.2 118.5-19.7 36.3-47.9 68.2-81.4 92.2l-29 20.9c-14.3 10.3-31.2 15.7-48.8 15.7h-133z" fill="#707070" p-id="4111"></path><path d="M536.9 198.5c-9.7-2.4-19.4 3.5-21.8 13.2-15.5 63-62.2 107.6-62.8 108.1-7.2 6.8-7.6 18.2-0.8 25.4 3.5 3.8 8.3 5.7 13.1 5.7 4.4 0 8.8-1.6 12.3-4.9 2.2-2.1 55-52.1 73.1-125.8 2.5-9.6-3.4-19.3-13.1-21.7zM411.9 354.5l-9.5 6.8c-8.1 5.8-9.9 17.1-4.1 25.1 3.2 4.5 8.1 7 13.2 7.4 4.1 0.3 8.3-0.8 11.9-3.4l9.5-6.8c8.1-5.8 9.9-17.1 4.1-25.1-5.8-8-17-9.8-25.1-4z" fill="#707070" p-id="4112"></path><path d="M222 426.3h78.3c13.4 0 24.3 10.9 24.3 24.3v359.6c0 13.4-10.9 24.3-24.3 24.3h-54.5c-12.8 0-23.4-9.9-24.2-22.7l-23.8-359.6c-0.9-14 10.2-25.9 24.2-25.9z" fill="#707070" p-id="4113"></path></svg>
                                              <div class="css-ydodb">{{answer.likes}}</div>
                                            </span>
                                          </div>
                                        </div>
                                        <v-divider></v-divider>
                                      </v-card-text>
                                    </v-card>
                                  </v-overlay>
                                </div>
                              </div>


                              <!--学生评论图标-->

                              <div style="position: relative; left: 58%">
                                <svg @click="openComment(item.id)" t="1600439943734" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5798" width="32" height="32"><path d="M193 317h-29a6 6 0 0 0-6 6v408a6 6 0 0 0 6 6h83.806v121.532a6 6 0 0 0 10.195 4.29L386.698 737h200.66l60.159 58.815A66.346 66.346 0 0 1 635 797H411.154L299.945 905.725c-26.064 25.482-67.85 25.01-93.332-1.054a66 66 0 0 1-18.807-46.14V797H164c-36.45 0-66-29.55-66-66V323c0-36.45 29.55-66 66-66h29v60z m642.194 449.532a66 66 0 0 1-18.807 46.139c-25.482 26.064-67.268 26.536-93.332 1.054L582.183 676H299c-36.45 0-66-29.55-66-66V164c0-36.45 29.55-66 66-66h560c36.45 0 66 29.55 66 66v446c0 36.45-29.55 66-66 66h-23.806v90.532z m-60-150.532H859a6 6 0 0 0 6-6V164a6 6 0 0 0-6-6H299a6 6 0 0 0-6 6v446a6 6 0 0 0 6 6h307.64L765 770.822a6 6 0 0 0 10.194-4.29V616z" fill="#2F54EB" p-id="5799"></path><path d="M757.5 384.5m0-49.5a49.5 49.5 0 1 0 0 99 49.5 49.5 0 1 0 0-99Z" fill="#85A5FF" p-id="5800"></path><path d="M575.5 384.5m0-49.5a49.5 49.5 0 1 0 0 99 49.5 49.5 0 1 0 0-99Z" fill="#85A5FF" p-id="5801"></path><path d="M392.5 384.5m0-49.5a49.5 49.5 0 1 0 0 99 49.5 49.5 0 1 0 0-99Z" fill="#85A5FF" p-id="5802"></path></svg>
                                <div style="margin-top: 15px">
                                  <v-overlay :value="isCommentOverlay">
                                    <v-btn
                                            icon
                                            @click="isCommentOverlay=false"
                                    >
                                      <v-icon>mdi-close</v-icon>
                                    </v-btn>
                                    <v-card width="600px" height="600px" style="overflow-y: scroll;overflow-x: hidden" color="#42A5F5">
                                      <v-card-title>
                                        <div class="comment-card-title">
                                          评论
                                        </div>
                                      </v-card-title>
                                      <v-card-text v-for="(comment,commentIndex) in currentStudentComment" :key="commentIndex">
                                        <div>
                                          <v-textarea
                                                  filled
                                                  v-bind:label="comment.username+':'"
                                                  auto-grow
                                                  v-bind:value="comment.contain"
                                                  readonly
                                          ></v-textarea>
                                          <div style="position: relative;left: 90%">
                                            <span style="display: inline-flex;align-items: center">
                                              <svg t="1600395014225" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4102" width="32" height="32"><path d="M180.2 363.5h133.1c15.6 0 30.8-4.9 43.5-14l29.1-20.9c66.1-47.5 106.9-122.5 110.9-203.8C497.9 102 516.7 84 539.6 84h4.8c20.7 0 35.2 7 51 28.1 48.4 60.4 50.3 140.4 35.9 214.4l-2.3 12c-4.9 11.9 3.9 24.9 16.7 24.9H828c45.1 0 78.4 8.1 67.2 86.2C873.5 639 818.3 815.7 797 857.4c-12.8 23.7-31.6 39.3-56.6 39.3H209.7c-28.1 0-51.3-21.7-53.3-49.7L127 420.4c-2.2-30.7 22.2-56.9 53.2-56.9z" fill="#707070" p-id="4103"></path><path d="M630.8 896.9h109.5c25 0 43.8-15.7 56.6-39.3 21.2-41.8 76.5-218.5 98.2-407.8 10.3-71.3-16.6-84.2-55.7-85.9 21.5 49.5 33.4 104.1 33.4 161.6-0.1 165.7-99.5 308.3-242 371.4zM151.8 781.8l4.5 65.4c1.9 28 25.2 49.7 53.3 49.7h93c-59-26.1-110.6-65.8-150.8-115.1zM497.2 120.4c42.4 3.2 83 12.8 120.7 28-6-12.6-13.5-24.8-22.7-36.2-7.8-10.4-15.3-17.4-23.4-21.8-12.8-2.5-25.9-4.4-39-5.8-18.2 2.9-32.8 17.3-35.6 35.8z" fill="#707070" p-id="4104"></path><path d="M449.1 856.1c-130.5 0-244.2-71.4-304.4-177.3l7.1 103c40.2 49.3 91.8 89 150.7 115.1h328.3c142.5-63 242-205.7 242-371.5 0-57.4-11.9-112-33.4-161.6-3.7-0.2-7.6-0.2-11.5-0.2h-59.2c19.5 43.6 30.3 91.9 30.3 142.7-0.1 193.1-156.7 349.8-349.9 349.8zM496.7 124.8c-0.6 11.6-1.9 23-3.9 34.2 52.3 6.5 101 24.6 143.4 51.5-3.1-21.6-8.9-42.6-18.3-62.3-37.8-15.2-78.3-24.8-120.7-28-0.2 1.6-0.4 3.1-0.5 4.6z" fill="#707070" p-id="4105"></path><path d="M482.8 198.1c60 10.6 113.6 39.4 155.1 80.4 1.8-22.8 1.6-45.7-1.6-67.9-42.5-27-91.2-45-143.4-51.5-2.5 13.3-5.8 26.3-10.1 39zM431.4 780.6c-162.1 0-293.5-131.4-293.5-293.5 0-43.2 9.3-84.2 26.1-121.1-22.8 7.2-38.8 29.3-37.1 54.5l17.8 258.2C204.8 784.6 318.6 856 449.1 856c193.2 0 349.8-156.6 349.8-349.8 0-50.8-10.8-99.1-30.3-142.7h-70.9c17.5 37.6 27.2 79.4 27.2 123.6 0 162.1-131.4 293.5-293.5 293.5z" fill="#707070" p-id="4106"></path><path d="M466.1 236.6C572 260.5 651 355 651 468.1c0 131-106.2 237.3-237.3 237.3S176.5 599.1 176.5 468.1c0-37.5 8.7-73 24.2-104.5h-20.6c-5.6 0-11.1 0.9-16.2 2.5-16.8 36.9-26.1 77.9-26.1 121.1 0 162.1 131.4 293.5 293.5 293.5s293.5-131.4 293.5-293.5c0-44.2-9.8-86-27.2-123.6h-52.1c-12.9 0-21.6-13-16.7-24.9l2.3-12c3.1-15.8 5.4-31.9 6.7-48.1-41.5-41.1-95.2-69.8-155.1-80.4-4.5 13.2-10 26-16.6 38.4z" fill="#707070" p-id="4107"></path><path d="M413.7 705.3c131 0 237.3-106.2 237.3-237.3 0-113-79.1-207.6-184.9-231.4-6.9 13.1-14.9 25.6-23.9 37.4 77.6 20.4 134.9 91 134.9 175 0 99.9-81 180.9-180.9 180.9s-180.9-81-180.9-180.9c0-30.9 7.8-60 21.4-85.4h-36c-15.5 31.5-24.2 67-24.2 104.5 0 131 106.2 237.2 237.2 237.2z" fill="#707070" p-id="4108"></path><path d="M396.2 629.9c99.9 0 180.9-81 180.9-180.9 0-84-57.3-154.6-134.9-175-9.6 12.6-20.4 24.4-32.3 35.2 53.7 13.9 93.3 62.7 93.3 120.7 0 68.9-55.8 124.7-124.7 124.7s-124.7-55.8-124.7-124.7c0-24.4 7-47.1 19.1-66.4h-36.3C223 389 215.3 418.1 215.3 449c0 99.9 81 180.9 180.9 180.9z" fill="#707070" p-id="4109"></path><path d="M378.5 554.5c68.9 0 124.7-55.8 124.7-124.7 0-58-39.6-106.8-93.3-120.7-7.6 6.9-15.6 13.4-24 19.5l-29.1 20.9c-12.7 9.1-27.9 14-43.5 14H273c-12.1 19.2-19.1 42-19.1 66.4-0.1 68.8 55.8 124.6 124.6 124.6z" fill="#707070" p-id="4110"></path><path d="M740.3 905.9H209.6c-32.7 0-60-25.5-62.2-58.1L118 421.2c-1.2-17.2 4.9-34.3 16.6-46.8 11.8-12.6 28.4-19.8 45.6-19.8h133.1c13.8 0 27.1-4.3 38.3-12.3l29.1-20.9c31.3-22.5 57.7-52.3 76.1-86.2 18.4-33.9 29.2-72.2 31-110.7 1.3-27.7 24.1-49.4 51.8-49.4h4.8c24.4 0 41.3 9.2 58.1 31.6 43.1 53.9 55.8 128.5 37.6 221.7l-2.5 12.8-0.3 0.8c-1.2 2.8-0.9 5.9 0.9 8.5 1.7 2.6 4.5 4 7.5 4H828c22.8 0 48.5 1.5 64.2 19.7 13.4 15.5 17.2 39.8 11.9 76.6-12.1 105.5-33.6 199.8-49.5 260.4-19.8 75.4-39.2 129.9-49.6 150.4l-0.1 0.2c-15.7 28.8-38 44.1-64.6 44.1zM180.2 372.5c-12.4 0-24 5-32.4 14.1s-12.7 20.9-11.8 33.3l29.4 426.6c1.6 23.2 21 41.3 44.3 41.3h530.7c19.9 0 36.2-11.6 48.6-34.5 10-19.7 28.8-72.7 48.2-146.7 15.8-60 37.1-153.5 49-258v-0.3c4.5-30.9 1.9-51.3-7.7-62.4-9.7-11.2-27.2-13.5-50.6-13.5H645.5c-9 0-17.4-4.5-22.5-12-4.9-7.2-5.9-16.3-2.9-24.4l2.2-11.2c17.1-87.9 5.6-157.5-34.1-207.1l-0.2-0.2C574.5 99.4 563 93 544.2 93h-4.8c-18.1 0-32.9 14.2-33.8 32.2-2 41.2-13.5 82.2-33.2 118.5-19.7 36.3-47.9 68.2-81.4 92.2l-29 20.9c-14.3 10.3-31.2 15.7-48.8 15.7h-133z" fill="#707070" p-id="4111"></path><path d="M536.9 198.5c-9.7-2.4-19.4 3.5-21.8 13.2-15.5 63-62.2 107.6-62.8 108.1-7.2 6.8-7.6 18.2-0.8 25.4 3.5 3.8 8.3 5.7 13.1 5.7 4.4 0 8.8-1.6 12.3-4.9 2.2-2.1 55-52.1 73.1-125.8 2.5-9.6-3.4-19.3-13.1-21.7zM411.9 354.5l-9.5 6.8c-8.1 5.8-9.9 17.1-4.1 25.1 3.2 4.5 8.1 7 13.2 7.4 4.1 0.3 8.3-0.8 11.9-3.4l9.5-6.8c8.1-5.8 9.9-17.1 4.1-25.1-5.8-8-17-9.8-25.1-4z" fill="#707070" p-id="4112"></path><path d="M222 426.3h78.3c13.4 0 24.3 10.9 24.3 24.3v359.6c0 13.4-10.9 24.3-24.3 24.3h-54.5c-12.8 0-23.4-9.9-24.2-22.7l-23.8-359.6c-0.9-14 10.2-25.9 24.2-25.9z" fill="#707070" p-id="4113"></path></svg>
                                              <div class="css-ydodb">{{comment.likes}}</div>
                                            </span>
                                          </div>
                                        </div>
                                        <v-divider></v-divider>
                                      </v-card-text>
                                    </v-card>
                                  </v-overlay>
                                </div>
                              </div>

                            </div>

                            <div v-else class="status-answer-box">
                              <v-btn color="#66BB6A" width="300px" >
                                <span class="btn-font-style">
                                  已解决
                                </span>
                              </v-btn>

                              <!--管理员回复图标-->
                              <div style="position: relative;left: 55%">
                                <svg @click="openAnswer(item.id)" t="1600439847025" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4864" width="32" height="32"><path d="M927.5 928.4H98c-16.6 0-30-13.4-30-30s13.4-30 30-30h829.5c16.6 0 30 13.4 30 30s-13.4 30-30 30zM723.9 401.4c-14.3 0-26.9-10.2-29.5-24.7-6.6-37.2-38.8-64.3-76.6-64.6l-43.6-0.3c-16.6-0.1-29.9-13.6-29.8-30.2 0.1-16.5 13.5-29.8 30-29.8h0.2l43.6 0.3c66.7 0.4 123.6 48.3 135.3 114 2.9 16.3-8 31.9-24.3 34.8-1.8 0.4-3.5 0.5-5.3 0.5z" fill="#F0C900" p-id="4865"></path><path d="M203 918.8h-4.3l-22.5-0.3-6-21.7c-23.9-87.1-4.3-181.1 52.6-251.3l412.1-509.3c22.7-28 54.9-45.9 90.7-50.3 35.8-4.4 71.4 5.2 100.2 26.9 57.8 43.6 69.3 126.1 25.7 183.9-0.9 1.2-1.8 2.4-2.7 3.5l-409.4 506c-28.8 35.6-65.9 64.6-107.3 84-40.3 18.7-84.8 28.6-129.1 28.6z m539.5-774.1c-3.2 0-6.4 0.2-9.6 0.6-20.3 2.5-38.5 12.6-51.4 28.5L269.4 683.1c-39.8 49.1-56.4 113.1-46.3 174.8 28.8-2.4 57.3-9.9 83.4-22.2 33.3-15.6 63-38.9 86.1-67.4l409.4-506c0.5-0.6 1-1.3 1.5-1.9 23.7-31.4 17.4-76.1-14-99.8-13.6-10.4-30-15.9-47-15.9z" fill="#3A3933" p-id="4866"></path></svg>
                                <div>
                                  <v-overlay :value="isAnswerOverlay">
                                    <v-btn
                                            icon
                                            @click="isAnswerOverlay=false"
                                    >
                                      <v-icon>mdi-close</v-icon>
                                    </v-btn>
                                    <v-card width="600px" height="600px" style="overflow-y: scroll;overflow-x: hidden" color="#42A5F5">
                                      <v-card-title>
                                        <div class="comment-card-title">
                                          评论
                                        </div>
                                      </v-card-title>
                                      <v-card-text v-for="(answer,answerIndex) in currentAnswer" :key="answerIndex">
                                        <div>
                                          <v-textarea
                                                  filled
                                                  v-bind:label="answer.admin_id+':'"
                                                  auto-grow
                                                  v-bind:value="answer.contain"
                                                  readonly
                                          ></v-textarea>
                                          <div style="position: relative;left: 90%">
                                            <span style="display: inline-flex;align-items: center">
                                              <svg t="1600395014225" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4102" width="32" height="32"><path d="M180.2 363.5h133.1c15.6 0 30.8-4.9 43.5-14l29.1-20.9c66.1-47.5 106.9-122.5 110.9-203.8C497.9 102 516.7 84 539.6 84h4.8c20.7 0 35.2 7 51 28.1 48.4 60.4 50.3 140.4 35.9 214.4l-2.3 12c-4.9 11.9 3.9 24.9 16.7 24.9H828c45.1 0 78.4 8.1 67.2 86.2C873.5 639 818.3 815.7 797 857.4c-12.8 23.7-31.6 39.3-56.6 39.3H209.7c-28.1 0-51.3-21.7-53.3-49.7L127 420.4c-2.2-30.7 22.2-56.9 53.2-56.9z" fill="#707070" p-id="4103"></path><path d="M630.8 896.9h109.5c25 0 43.8-15.7 56.6-39.3 21.2-41.8 76.5-218.5 98.2-407.8 10.3-71.3-16.6-84.2-55.7-85.9 21.5 49.5 33.4 104.1 33.4 161.6-0.1 165.7-99.5 308.3-242 371.4zM151.8 781.8l4.5 65.4c1.9 28 25.2 49.7 53.3 49.7h93c-59-26.1-110.6-65.8-150.8-115.1zM497.2 120.4c42.4 3.2 83 12.8 120.7 28-6-12.6-13.5-24.8-22.7-36.2-7.8-10.4-15.3-17.4-23.4-21.8-12.8-2.5-25.9-4.4-39-5.8-18.2 2.9-32.8 17.3-35.6 35.8z" fill="#707070" p-id="4104"></path><path d="M449.1 856.1c-130.5 0-244.2-71.4-304.4-177.3l7.1 103c40.2 49.3 91.8 89 150.7 115.1h328.3c142.5-63 242-205.7 242-371.5 0-57.4-11.9-112-33.4-161.6-3.7-0.2-7.6-0.2-11.5-0.2h-59.2c19.5 43.6 30.3 91.9 30.3 142.7-0.1 193.1-156.7 349.8-349.9 349.8zM496.7 124.8c-0.6 11.6-1.9 23-3.9 34.2 52.3 6.5 101 24.6 143.4 51.5-3.1-21.6-8.9-42.6-18.3-62.3-37.8-15.2-78.3-24.8-120.7-28-0.2 1.6-0.4 3.1-0.5 4.6z" fill="#707070" p-id="4105"></path><path d="M482.8 198.1c60 10.6 113.6 39.4 155.1 80.4 1.8-22.8 1.6-45.7-1.6-67.9-42.5-27-91.2-45-143.4-51.5-2.5 13.3-5.8 26.3-10.1 39zM431.4 780.6c-162.1 0-293.5-131.4-293.5-293.5 0-43.2 9.3-84.2 26.1-121.1-22.8 7.2-38.8 29.3-37.1 54.5l17.8 258.2C204.8 784.6 318.6 856 449.1 856c193.2 0 349.8-156.6 349.8-349.8 0-50.8-10.8-99.1-30.3-142.7h-70.9c17.5 37.6 27.2 79.4 27.2 123.6 0 162.1-131.4 293.5-293.5 293.5z" fill="#707070" p-id="4106"></path><path d="M466.1 236.6C572 260.5 651 355 651 468.1c0 131-106.2 237.3-237.3 237.3S176.5 599.1 176.5 468.1c0-37.5 8.7-73 24.2-104.5h-20.6c-5.6 0-11.1 0.9-16.2 2.5-16.8 36.9-26.1 77.9-26.1 121.1 0 162.1 131.4 293.5 293.5 293.5s293.5-131.4 293.5-293.5c0-44.2-9.8-86-27.2-123.6h-52.1c-12.9 0-21.6-13-16.7-24.9l2.3-12c3.1-15.8 5.4-31.9 6.7-48.1-41.5-41.1-95.2-69.8-155.1-80.4-4.5 13.2-10 26-16.6 38.4z" fill="#707070" p-id="4107"></path><path d="M413.7 705.3c131 0 237.3-106.2 237.3-237.3 0-113-79.1-207.6-184.9-231.4-6.9 13.1-14.9 25.6-23.9 37.4 77.6 20.4 134.9 91 134.9 175 0 99.9-81 180.9-180.9 180.9s-180.9-81-180.9-180.9c0-30.9 7.8-60 21.4-85.4h-36c-15.5 31.5-24.2 67-24.2 104.5 0 131 106.2 237.2 237.2 237.2z" fill="#707070" p-id="4108"></path><path d="M396.2 629.9c99.9 0 180.9-81 180.9-180.9 0-84-57.3-154.6-134.9-175-9.6 12.6-20.4 24.4-32.3 35.2 53.7 13.9 93.3 62.7 93.3 120.7 0 68.9-55.8 124.7-124.7 124.7s-124.7-55.8-124.7-124.7c0-24.4 7-47.1 19.1-66.4h-36.3C223 389 215.3 418.1 215.3 449c0 99.9 81 180.9 180.9 180.9z" fill="#707070" p-id="4109"></path><path d="M378.5 554.5c68.9 0 124.7-55.8 124.7-124.7 0-58-39.6-106.8-93.3-120.7-7.6 6.9-15.6 13.4-24 19.5l-29.1 20.9c-12.7 9.1-27.9 14-43.5 14H273c-12.1 19.2-19.1 42-19.1 66.4-0.1 68.8 55.8 124.6 124.6 124.6z" fill="#707070" p-id="4110"></path><path d="M740.3 905.9H209.6c-32.7 0-60-25.5-62.2-58.1L118 421.2c-1.2-17.2 4.9-34.3 16.6-46.8 11.8-12.6 28.4-19.8 45.6-19.8h133.1c13.8 0 27.1-4.3 38.3-12.3l29.1-20.9c31.3-22.5 57.7-52.3 76.1-86.2 18.4-33.9 29.2-72.2 31-110.7 1.3-27.7 24.1-49.4 51.8-49.4h4.8c24.4 0 41.3 9.2 58.1 31.6 43.1 53.9 55.8 128.5 37.6 221.7l-2.5 12.8-0.3 0.8c-1.2 2.8-0.9 5.9 0.9 8.5 1.7 2.6 4.5 4 7.5 4H828c22.8 0 48.5 1.5 64.2 19.7 13.4 15.5 17.2 39.8 11.9 76.6-12.1 105.5-33.6 199.8-49.5 260.4-19.8 75.4-39.2 129.9-49.6 150.4l-0.1 0.2c-15.7 28.8-38 44.1-64.6 44.1zM180.2 372.5c-12.4 0-24 5-32.4 14.1s-12.7 20.9-11.8 33.3l29.4 426.6c1.6 23.2 21 41.3 44.3 41.3h530.7c19.9 0 36.2-11.6 48.6-34.5 10-19.7 28.8-72.7 48.2-146.7 15.8-60 37.1-153.5 49-258v-0.3c4.5-30.9 1.9-51.3-7.7-62.4-9.7-11.2-27.2-13.5-50.6-13.5H645.5c-9 0-17.4-4.5-22.5-12-4.9-7.2-5.9-16.3-2.9-24.4l2.2-11.2c17.1-87.9 5.6-157.5-34.1-207.1l-0.2-0.2C574.5 99.4 563 93 544.2 93h-4.8c-18.1 0-32.9 14.2-33.8 32.2-2 41.2-13.5 82.2-33.2 118.5-19.7 36.3-47.9 68.2-81.4 92.2l-29 20.9c-14.3 10.3-31.2 15.7-48.8 15.7h-133z" fill="#707070" p-id="4111"></path><path d="M536.9 198.5c-9.7-2.4-19.4 3.5-21.8 13.2-15.5 63-62.2 107.6-62.8 108.1-7.2 6.8-7.6 18.2-0.8 25.4 3.5 3.8 8.3 5.7 13.1 5.7 4.4 0 8.8-1.6 12.3-4.9 2.2-2.1 55-52.1 73.1-125.8 2.5-9.6-3.4-19.3-13.1-21.7zM411.9 354.5l-9.5 6.8c-8.1 5.8-9.9 17.1-4.1 25.1 3.2 4.5 8.1 7 13.2 7.4 4.1 0.3 8.3-0.8 11.9-3.4l9.5-6.8c8.1-5.8 9.9-17.1 4.1-25.1-5.8-8-17-9.8-25.1-4z" fill="#707070" p-id="4112"></path><path d="M222 426.3h78.3c13.4 0 24.3 10.9 24.3 24.3v359.6c0 13.4-10.9 24.3-24.3 24.3h-54.5c-12.8 0-23.4-9.9-24.2-22.7l-23.8-359.6c-0.9-14 10.2-25.9 24.2-25.9z" fill="#707070" p-id="4113"></path></svg>
                                              <div class="css-ydodb">{{answer.likes}}</div>
                                            </span>
                                          </div>
                                        </div>
                                        <v-divider></v-divider>
                                      </v-card-text>
                                    </v-card>
                                  </v-overlay>
                                </div>
                              </div>


                              <!--学生评论图标-->

                              <div style="position: relative; left: 58%">
                                <svg @click="openComment(item.id)" t="1600439943734" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5798" width="32" height="32"><path d="M193 317h-29a6 6 0 0 0-6 6v408a6 6 0 0 0 6 6h83.806v121.532a6 6 0 0 0 10.195 4.29L386.698 737h200.66l60.159 58.815A66.346 66.346 0 0 1 635 797H411.154L299.945 905.725c-26.064 25.482-67.85 25.01-93.332-1.054a66 66 0 0 1-18.807-46.14V797H164c-36.45 0-66-29.55-66-66V323c0-36.45 29.55-66 66-66h29v60z m642.194 449.532a66 66 0 0 1-18.807 46.139c-25.482 26.064-67.268 26.536-93.332 1.054L582.183 676H299c-36.45 0-66-29.55-66-66V164c0-36.45 29.55-66 66-66h560c36.45 0 66 29.55 66 66v446c0 36.45-29.55 66-66 66h-23.806v90.532z m-60-150.532H859a6 6 0 0 0 6-6V164a6 6 0 0 0-6-6H299a6 6 0 0 0-6 6v446a6 6 0 0 0 6 6h307.64L765 770.822a6 6 0 0 0 10.194-4.29V616z" fill="#2F54EB" p-id="5799"></path><path d="M757.5 384.5m0-49.5a49.5 49.5 0 1 0 0 99 49.5 49.5 0 1 0 0-99Z" fill="#85A5FF" p-id="5800"></path><path d="M575.5 384.5m0-49.5a49.5 49.5 0 1 0 0 99 49.5 49.5 0 1 0 0-99Z" fill="#85A5FF" p-id="5801"></path><path d="M392.5 384.5m0-49.5a49.5 49.5 0 1 0 0 99 49.5 49.5 0 1 0 0-99Z" fill="#85A5FF" p-id="5802"></path></svg>
                                <div style="margin-top: 15px">
                                  <v-overlay :value="isCommentOverlay">
                                    <v-btn
                                            icon
                                            @click="isCommentOverlay=false"
                                    >
                                      <v-icon>mdi-close</v-icon>
                                    </v-btn>
                                    <v-card width="600px" height="600px" style="overflow-y: scroll;overflow-x: hidden" color="#42A5F5">
                                      <v-card-title>
                                        <div class="comment-card-title">
                                          评论
                                        </div>
                                      </v-card-title>
                                      <v-card-text v-for="(comment,commentIndex) in currentStudentComment" :key="commentIndex">
                                        <div>
                                          <v-textarea
                                                  filled
                                                  v-bind:label="comment.username+':'"
                                                  auto-grow
                                                  v-bind:value="comment.contain"
                                                  readonly
                                          ></v-textarea>
                                          <div style="position: relative;left: 90%">
                                            <span style="display: inline-flex;align-items: center">
                                              <svg t="1600395014225" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4102" width="32" height="32"><path d="M180.2 363.5h133.1c15.6 0 30.8-4.9 43.5-14l29.1-20.9c66.1-47.5 106.9-122.5 110.9-203.8C497.9 102 516.7 84 539.6 84h4.8c20.7 0 35.2 7 51 28.1 48.4 60.4 50.3 140.4 35.9 214.4l-2.3 12c-4.9 11.9 3.9 24.9 16.7 24.9H828c45.1 0 78.4 8.1 67.2 86.2C873.5 639 818.3 815.7 797 857.4c-12.8 23.7-31.6 39.3-56.6 39.3H209.7c-28.1 0-51.3-21.7-53.3-49.7L127 420.4c-2.2-30.7 22.2-56.9 53.2-56.9z" fill="#707070" p-id="4103"></path><path d="M630.8 896.9h109.5c25 0 43.8-15.7 56.6-39.3 21.2-41.8 76.5-218.5 98.2-407.8 10.3-71.3-16.6-84.2-55.7-85.9 21.5 49.5 33.4 104.1 33.4 161.6-0.1 165.7-99.5 308.3-242 371.4zM151.8 781.8l4.5 65.4c1.9 28 25.2 49.7 53.3 49.7h93c-59-26.1-110.6-65.8-150.8-115.1zM497.2 120.4c42.4 3.2 83 12.8 120.7 28-6-12.6-13.5-24.8-22.7-36.2-7.8-10.4-15.3-17.4-23.4-21.8-12.8-2.5-25.9-4.4-39-5.8-18.2 2.9-32.8 17.3-35.6 35.8z" fill="#707070" p-id="4104"></path><path d="M449.1 856.1c-130.5 0-244.2-71.4-304.4-177.3l7.1 103c40.2 49.3 91.8 89 150.7 115.1h328.3c142.5-63 242-205.7 242-371.5 0-57.4-11.9-112-33.4-161.6-3.7-0.2-7.6-0.2-11.5-0.2h-59.2c19.5 43.6 30.3 91.9 30.3 142.7-0.1 193.1-156.7 349.8-349.9 349.8zM496.7 124.8c-0.6 11.6-1.9 23-3.9 34.2 52.3 6.5 101 24.6 143.4 51.5-3.1-21.6-8.9-42.6-18.3-62.3-37.8-15.2-78.3-24.8-120.7-28-0.2 1.6-0.4 3.1-0.5 4.6z" fill="#707070" p-id="4105"></path><path d="M482.8 198.1c60 10.6 113.6 39.4 155.1 80.4 1.8-22.8 1.6-45.7-1.6-67.9-42.5-27-91.2-45-143.4-51.5-2.5 13.3-5.8 26.3-10.1 39zM431.4 780.6c-162.1 0-293.5-131.4-293.5-293.5 0-43.2 9.3-84.2 26.1-121.1-22.8 7.2-38.8 29.3-37.1 54.5l17.8 258.2C204.8 784.6 318.6 856 449.1 856c193.2 0 349.8-156.6 349.8-349.8 0-50.8-10.8-99.1-30.3-142.7h-70.9c17.5 37.6 27.2 79.4 27.2 123.6 0 162.1-131.4 293.5-293.5 293.5z" fill="#707070" p-id="4106"></path><path d="M466.1 236.6C572 260.5 651 355 651 468.1c0 131-106.2 237.3-237.3 237.3S176.5 599.1 176.5 468.1c0-37.5 8.7-73 24.2-104.5h-20.6c-5.6 0-11.1 0.9-16.2 2.5-16.8 36.9-26.1 77.9-26.1 121.1 0 162.1 131.4 293.5 293.5 293.5s293.5-131.4 293.5-293.5c0-44.2-9.8-86-27.2-123.6h-52.1c-12.9 0-21.6-13-16.7-24.9l2.3-12c3.1-15.8 5.4-31.9 6.7-48.1-41.5-41.1-95.2-69.8-155.1-80.4-4.5 13.2-10 26-16.6 38.4z" fill="#707070" p-id="4107"></path><path d="M413.7 705.3c131 0 237.3-106.2 237.3-237.3 0-113-79.1-207.6-184.9-231.4-6.9 13.1-14.9 25.6-23.9 37.4 77.6 20.4 134.9 91 134.9 175 0 99.9-81 180.9-180.9 180.9s-180.9-81-180.9-180.9c0-30.9 7.8-60 21.4-85.4h-36c-15.5 31.5-24.2 67-24.2 104.5 0 131 106.2 237.2 237.2 237.2z" fill="#707070" p-id="4108"></path><path d="M396.2 629.9c99.9 0 180.9-81 180.9-180.9 0-84-57.3-154.6-134.9-175-9.6 12.6-20.4 24.4-32.3 35.2 53.7 13.9 93.3 62.7 93.3 120.7 0 68.9-55.8 124.7-124.7 124.7s-124.7-55.8-124.7-124.7c0-24.4 7-47.1 19.1-66.4h-36.3C223 389 215.3 418.1 215.3 449c0 99.9 81 180.9 180.9 180.9z" fill="#707070" p-id="4109"></path><path d="M378.5 554.5c68.9 0 124.7-55.8 124.7-124.7 0-58-39.6-106.8-93.3-120.7-7.6 6.9-15.6 13.4-24 19.5l-29.1 20.9c-12.7 9.1-27.9 14-43.5 14H273c-12.1 19.2-19.1 42-19.1 66.4-0.1 68.8 55.8 124.6 124.6 124.6z" fill="#707070" p-id="4110"></path><path d="M740.3 905.9H209.6c-32.7 0-60-25.5-62.2-58.1L118 421.2c-1.2-17.2 4.9-34.3 16.6-46.8 11.8-12.6 28.4-19.8 45.6-19.8h133.1c13.8 0 27.1-4.3 38.3-12.3l29.1-20.9c31.3-22.5 57.7-52.3 76.1-86.2 18.4-33.9 29.2-72.2 31-110.7 1.3-27.7 24.1-49.4 51.8-49.4h4.8c24.4 0 41.3 9.2 58.1 31.6 43.1 53.9 55.8 128.5 37.6 221.7l-2.5 12.8-0.3 0.8c-1.2 2.8-0.9 5.9 0.9 8.5 1.7 2.6 4.5 4 7.5 4H828c22.8 0 48.5 1.5 64.2 19.7 13.4 15.5 17.2 39.8 11.9 76.6-12.1 105.5-33.6 199.8-49.5 260.4-19.8 75.4-39.2 129.9-49.6 150.4l-0.1 0.2c-15.7 28.8-38 44.1-64.6 44.1zM180.2 372.5c-12.4 0-24 5-32.4 14.1s-12.7 20.9-11.8 33.3l29.4 426.6c1.6 23.2 21 41.3 44.3 41.3h530.7c19.9 0 36.2-11.6 48.6-34.5 10-19.7 28.8-72.7 48.2-146.7 15.8-60 37.1-153.5 49-258v-0.3c4.5-30.9 1.9-51.3-7.7-62.4-9.7-11.2-27.2-13.5-50.6-13.5H645.5c-9 0-17.4-4.5-22.5-12-4.9-7.2-5.9-16.3-2.9-24.4l2.2-11.2c17.1-87.9 5.6-157.5-34.1-207.1l-0.2-0.2C574.5 99.4 563 93 544.2 93h-4.8c-18.1 0-32.9 14.2-33.8 32.2-2 41.2-13.5 82.2-33.2 118.5-19.7 36.3-47.9 68.2-81.4 92.2l-29 20.9c-14.3 10.3-31.2 15.7-48.8 15.7h-133z" fill="#707070" p-id="4111"></path><path d="M536.9 198.5c-9.7-2.4-19.4 3.5-21.8 13.2-15.5 63-62.2 107.6-62.8 108.1-7.2 6.8-7.6 18.2-0.8 25.4 3.5 3.8 8.3 5.7 13.1 5.7 4.4 0 8.8-1.6 12.3-4.9 2.2-2.1 55-52.1 73.1-125.8 2.5-9.6-3.4-19.3-13.1-21.7zM411.9 354.5l-9.5 6.8c-8.1 5.8-9.9 17.1-4.1 25.1 3.2 4.5 8.1 7 13.2 7.4 4.1 0.3 8.3-0.8 11.9-3.4l9.5-6.8c8.1-5.8 9.9-17.1 4.1-25.1-5.8-8-17-9.8-25.1-4z" fill="#707070" p-id="4112"></path><path d="M222 426.3h78.3c13.4 0 24.3 10.9 24.3 24.3v359.6c0 13.4-10.9 24.3-24.3 24.3h-54.5c-12.8 0-23.4-9.9-24.2-22.7l-23.8-359.6c-0.9-14 10.2-25.9 24.2-25.9z" fill="#707070" p-id="4113"></path></svg>
                                              <div class="css-ydodb">{{comment.likes}}</div>
                                            </span>
                                          </div>
                                        </div>
                                        <v-divider></v-divider>
                                      </v-card-text>
                                    </v-card>
                                  </v-overlay>
                                </div>
                              </div>
                            </div>

                          </v-card>

                        </v-tab-item>
                      </v-tabs-items>

                    </v-expansion-panel-content>
                  </div>
                </v-expansion-panel>
              </v-expansion-panels>
            </div>



          </v-col>
        </v-row>
      </v-container>
    </div>
  </div>
</template>

<script>
  import MyHeader from "../components/Header";
  import MySidebar from "../components/Sidebar";
  import ProfileCard from "../components/ProfileCard";
  import TagSearchColumn from "../components/TagSearchColumn";
  import {
    addComment,
    addQuestionTag,
    getAnswerByQuestion,
    getQuestionsByTag,
    getTagByQuestion,
    removeTagByQuestion,
    getCommitByQuestion
  } from "../api/admin";
  import {getUser} from "../utils/cookie";

  const toolbarOptions = [
  ["bold", "italic", "underline", "strike"], // toggled buttons

  [{ header: 1 }, { header: 2 }], // custom button values

  [{ size: ["small", false, "large", "huge"] }], // custom dropdown
  [{ header: [1, 2, 3, 4, 5, 6, false] }],

  [{ color: [] }, { background: [] }], // dropdown with defaults from theme
  [{ align: [] }],
  ["clean"],
];
export default {
  name: "Home",
  data: function() {
    return {
      isShowComment: false,
      permission:getUser().isLB,
      tagsList: [],
      currentTagId: 0,
      ifUsageShowed: true,
      currentQuestions: [],
      isCommentOverlay:false,
      isAnswerOverlay:false,
      currentStudentComment: [],
      currentAnswer: [],

      editorOption: {
        placeholder: "请输入评论",
        theme: "snow",
        modules: {
          toolbar: {
            container: toolbarOptions,
          },
        },
      },
      controlTab: null,
      controlTabItems: [
        { tab: "updateTag", title: "修改标签" },
        { tab: "addComment", title: "添加回复" },
      ],
    };
  },
  methods: {
    onChangeTag: function(tagId) {
      if (tagId.length === 0 || tagId[0] === 0) {
        this.ifUsageShowed = true;
      } else {
        this.ifUsageShowed = false;
        this.currentTagId = tagId[0];

        const data = {
          id: getUser().id,
          token: getUser().token,
          tag_id: tagId[0],
        };

        //获取当前问题列表
        getQuestionsByTag(data)
          .then((res) => {
            if (res.data.ErrorCode === 1) {
              alert("拉取问题失败:" + res.data.msg);
            } else if (res.data.ErrorCode === 0) {
              //对tags排序
              res.data.data.forEach((quesItem) => {
                quesItem.tags.sort((a, b) => {
                  return a.id - b.id;
                });
              });
              this.currentQuestions = res.data.data;

              //获取当前问题的管理员的回复
              //获取当前问题学生的评论

              for(let i=0;i<this.currentQuestions.length;i++){
                const id= this.currentQuestions[i].id
                this.getAnswerByQuestion(id,i)
                this.getCommentByQuestion(id,i)
              }
            }
          })
          .catch((error) => {
            console.log(error);
          });
      }



    },

    //删除问题标签
    deleteTag(questionId, tagId) {

      const data = {
        id : Number(getUser().id),
        token : getUser().token,
        question_id: questionId,
        tagList: JSON.stringify([tagId])
      }

      console.log(data);
      removeTagByQuestion(data).then(res => {
        const response = res.data
        if(response.ErrorCode === 1){
          alert("删除失败"+response.msg)
          console.log(data);
        }else {
          alert("删除成功")
        }
      })
    },

    //提交评论
    postCommit(questionId, comment) {

      const data = {
        id : getUser().id,
        token : getUser().token,
        question_id: questionId,
        answer_contain: comment
      }

      addComment(data).then(res => {
        const response = res.data
        if(response.ErrorCode === 1){
          alert("回复失败")
        }else {
          alert("回复成功")
          location.reload()
        }
      })


    },


    onAddTag(questionId, select, reason) {
      if (typeof select === "undefined") {
        alert("未选择所要添加的标签")
      } else if(reason === "undefined"){
        alert("未填写流转原因")
      }else {
        const data={
          id: getUser().id,
          token: getUser().token,
          question_id: questionId,
          tagList: JSON.stringify([select[3]]),//这里或许要转换一下格式,
          reason: reason
        }

        //增加标签
        addQuestionTag(data).then(res => {
          const response = res.data
          if(response.ErrorCode === 1){
            alert("添加标签失败")
          }else {
            const otherTag = this.searchTagId("其他")
            const removeData = {
              id: getUser().id,
              token: getUser().token,
              question_id: questionId,
              tagList: JSON.stringify([otherTag])
            }
            //删除“其他”标签
            removeTagByQuestion(removeData).then(res => {
              let removeResponse = res.data
              if(removeResponse.ErrorCode === 1){
                alert("删除'其他标签'失败")
              }else {
                  alert("流转成功")
                  location.reload()
              }
            })
          }
        })


      }
    },


    showSelectTags(question) {
      question.tagsListForShow = [];
      question.tags.sort((a, b) => {
        return a.id - b.id;
      });
      let idx = 0;
      this.tagsList.forEach(function(item) {
        if (idx < question.tags.length) {
          if (question.tags[idx].id !== item.id) {
            question.tagsListForShow.push("id:" + item.id + "-" + item.name);
          } else {
            idx++;
          }
        } else {
          question.tagsListForShow.push("id:" + item.id + "-" + item.name);
        }
      });
      return question;
    },


    onTagsInit(tagsTree) {
      //当标签获取完成时，向home组件发出事件，传递标签树，展平
      let that = this;
      let dfs = function(obj) {
        obj.children.forEach((item) => {
          dfs(item);
        });
        that.tagsList.push(obj);
      };
      tagsTree.forEach((item) => {
        dfs(item);
      });
      that.tagsList.sort((a, b) => {
        return a.id - b.id;
      });

      this.$store.commit("setTagsList",this.tagsList)

    },



    //退回问题到两办
    returnBack(questionId){
      let reason = prompt("请输入退回原因")
      const data = {
        id: getUser().id,
        token: getUser().token,
        question_id: questionId
      }
      let tagList=[]
      getTagByQuestion(data).then(res => {
        const response = res.data
        if(response.ErrorCode === 1){
          alert("获取问题所属标签失败")
        }else {
          const tagData = response.data
          for(let i=0;i<tagData.length;i++){
            tagList.push(tagData[i].id)
          }


          tagList=JSON.stringify(tagList)

          // data.tagList=tagList
          const removeData = {
            id: getUser().id,
            token: getUser().token,
            question_id: questionId,
            tagList: tagList
          }

          //删除该所属问题下所有标签
          removeTagByQuestion(removeData).then(res => {
            const removeResponse = res.data
            if(removeResponse.ErrorCode === 1){
              alert("删除问题标签失败")
            }else {
              //这里增加"其他"标签
              //然后还要写退回原因
              const addData = {
                id: getUser().id,
                token: getUser().token,
                question_id: questionId,
                tagList: JSON.stringify([this.searchTagId("其他")]),
                reason: reason
              }

              addQuestionTag(addData).then(res => {
                const addResponse = res.data
                if(addResponse.ErrorCode === 1){
                  alert("退回失败")
                }else {
                  alert("退回成功")
                  location.reload()
                }
              })
            }
          })
        }
      })
    },

      //通过问题获取答复
      getAnswerByQuestion(questionId,i){
        const data={
            question_id: questionId
        }
          getAnswerByQuestion(data).then(res => {
          const response = res.data
          if (response.ErrorCode === 1) {
            alert("拉取数据失败")
          } else {
            this.currentQuestions[i].answer = response.data
          }
        });
      },

    //通过问题获取评论
      getCommentByQuestion(questionId,i){
        const data={
          question_id: questionId
        }
        getCommitByQuestion(data).then(res => {
          const response = res.data
          if (response.ErrorCode === 1) {
            alert("拉取数据失败")
          } else {
            this.currentQuestions[i].commit = response.data
          }
        });
      },


    //打开管理员回复
    openAnswer(questionId){
      const data = {
        question_id: questionId
      }

      getAnswerByQuestion(data).then(res => {
        const response = res.data
        if(response.ErrorCode === 1){
          alert("获取学生评论失败")
        }else {
          //获取当前问题学生评论
          this.currentAnswer = response.data
          //打开遮罩
          this.isAnswerOverlay =true
        }
      })
    },

    //打开学生评论

    openComment(questionId){
      const data = {
        question_id: questionId
      }

      getCommitByQuestion(data).then(res => {
        const response = res.data
        if(response.ErrorCode === 1){
          alert("获取学生评论失败")
        }else {
          //获取当前问题学生评论
          this.currentStudentComment = response.data
          //打开遮罩
          this.isCommentOverlay =true
        }
      })
    },


    //通过标签名找标签ID
    searchTagId(tag_name){
      const tagsList = this.tagsList
      for(let i=0;i<tagsList.length;i++){
        if(tagsList[i].name === tag_name){
          return tagsList[i].id
        }
      }
      return -1
    }
  },

  created() {

  },
  components: {
    TagSearchColumn,
    MyHeader,
    MySidebar,
    ProfileCard,
  },
};
</script>

<style scoped>
.content {
  margin-top: 50px;
  margin-left: 25%;
}

.content-title {
  width: 100%;
  color: #1e88e5;
  font-size: 24px;
  font-weight: 900;
  text-align: center;
}

.content-text {
  font-size: 18px;
  font-weight: 500;
}

p {
  line-height: 180%;
  text-indent: 20px;
}

.question-field {
  margin-top: 25px;
}

.select-control >>> .v-menu__content {
  top: 70px !important;
  left: 12px !important;
}

.btn-box-style{
  margin-top: 15px;
}

.btn-font-style{
  color: #ffffff;
  font-size: 16px;
  font-weight: 700;
}

.status-answer-box{
  margin-top: 15px;
  margin-bottom: 15px;
  width: 100%;
  display: flex;
}

.comment-span{
  font-size: 18px;
  color: #FFB74D;
  font-weight: 600;
}

 .comment-span:hover{
   opacity: 0.5;
   cursor: pointer;
 }
</style>
